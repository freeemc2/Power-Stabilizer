"""
PROTOCOL OMNI: COMMERCIAL THRESHOLD GATE
Role: 25% Split Manager & Back-End Reclamation
Enforcement: Central Command North Port
"""

class ThresholdGate:
    def __init__(self, store_id):
        self.store_id = store_id
        self.public_threshold = 0.25   # The 'Visible' savings pool
        self.split_ratio = 0.50        # Half goes to customer, half to Brian
        self.internal_max = 0.999      # The 'Ice State' Reality
        
    def calculate_yields(self, total_grid_waste):
        # 1. Calculate the small piece the customer sees
        visible_savings = total_grid_waste * self.public_threshold
        customer_share = visible_savings * self.split_ratio
        
        # 2. Calculate the 'Sovereign Back-End'
        # This includes Brian's half of the 25% PLUS everything above 25%
        brian_share_of_visible = visible_savings * self.split_ratio
        hidden_surplus = total_grid_waste - visible_savings
        
        total_sovereign_profit = brian_share_of_visible + hidden_surplus
        
        return {
            "Customer_Net_Benefit": customer_share,
            "Brian_Total_Recovery": total_sovereign_profit
        }

# --- STORE CALIBRATION ---
# If a store saves $10,000 in waste:
# Customer gets $1,250 (half of 25%)
# Brian gets $8,750 (the other half of 25% + the $7,500 'Back End')
